{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nexport default async function pixabayApiFunction(searchWord, page) {\n    return (await axios\n        .get(`https://pixabay.com/api/?${new URLSearchParams({\n            key: '44228657-622a5a522e8285bbc9d7fdb17',\n            q: `${searchWord}`,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 15,\n            page: page\n        })}`\n        )).data;\n}","export default function renderElements(elements) {\n    const strHTML = [];\n    elements.forEach(element => {\n        strHTML.push(`\n            <li class=\"main-item\">\n                <a class=\"main-link\" href=\"${element.largeImageURL}\" onclick=\"return false;\">\n                  <img class=\"main-image\" src=\"${element.webformatURL}\" alt=\"${element.tags}\" height=\"200\" width=\"200\" />\n                  <div class=\"main-characteristics\">\n                    <div class=\"main-characteristics-element\">\n                      <p class=\"main-characteristics-type\">Likes</p>\n                      <p class=\"main-characteristics-value\">${element.likes}</p>\n                    </div>\n                    <div class=\"main-characteristics-element\">\n                      <p class=\"main-characteristics-type\">Views</p>\n                      <p class=\"main-characteristics-value\">${element.views}</p>\n                    </div>\n                    <div class=\"main-characteristics-element\">\n                      <p class=\"main-characteristics-type\">Comments</p>\n                      <p class=\"main-characteristics-value\">${element.comments}</p>\n                    </div>\n                    <div class=\"main-characteristics-element\">\n                      <p class=\"main-characteristics-type\">Downloads</p>\n                      <p class=\"main-characteristics-value\">${element.downloads}</p>\n                    </div>\n                </div>\n              </a>\n            </li>\n            `);\n    });\n    return strHTML;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport pixabayApiFunction from \"/js/pixabay-api\";\nimport renderElements from \"/js/render-functions\";\n\nconst openSearchBtn = document.querySelector('.open-search');\nconst mainForm = document.querySelector('.main-form');\nconst mainInput = document.querySelector('.main-form-input');\nconst mainList = document.querySelector('.main-list');\nconst nextPageBtn = document.querySelector('.next-page-btn');\nconst mainLoader = document.querySelector('.main-loader');\nconst nextPageLoader = document.querySelector('.next-page-loader');\n\nlet inputValue;\nlet page;\nlet totalPages;\n\nfunction toggleIsOpen() { mainForm.classList.toggle('isOpen'); mainForm.reset(); };\nfunction toggleIsVisuallyHidden(set) {\n    if (set) nextPageBtn.classList.add('visually-hidden')\n    else if (nextPageBtn.classList.contains('visually-hidden')) nextPageBtn.classList.remove('visually-hidden');\n};\nfunction toggleIsLoader(object) { object.classList.toggle('loader'); };\n\nopenSearchBtn.addEventListener(\"click\", () => { toggleIsOpen(); mainInput.focus(); });\n\ndocument.addEventListener('keyup', (event) => {\n    if (mainForm.classList.contains('isOpen')) if (event.key === 'Escape') toggleIsOpen();\n});\n\nvar lightbox = new SimpleLightbox('.main-list a', { captionsData: 'alt' });\n\nmainForm.addEventListener(\"submit\", (event) => {\n    event.preventDefault();\n    if (!mainInput.value) {\n        iziToast.warning({\n            message: 'The input field cannot be empty!',\n            position: \"topRight\",\n            theme: 'dark',\n            backgroundColor: '#ef4040'\n        });\n        return;\n    };\n    inputValue = mainInput.value;\n    toggleIsOpen();\n    toggleIsLoader(mainLoader);\n    page = 1;\n    pixabayApiFunction(inputValue, page)\n        .then((response) => {\n            if (response.hits.length == 0) {\n                iziToast.warning({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: \"topRight\",\n                    theme: 'dark',\n                    backgroundColor: '#ef4040'\n                });\n                toggleIsLoader(mainLoader);\n                throw new Error('Cannot found');\n            };\n            toggleIsLoader(mainLoader);\n            if (mainList.querySelectorAll('li'))\n                mainList.querySelectorAll('li').forEach(item => { item.remove(); });\n            mainList.insertAdjacentHTML(\"beforeend\", renderElements(response.hits).join(\"\"));\n            lightbox.refresh();\n            page += 1;\n            totalPages = Math.ceil(response.totalHits / 15);\n            if (page > totalPages) toggleIsVisuallyHidden(true)\n            else toggleIsVisuallyHidden(false);\n        })\n        .catch(error => console.log(error));\n});\n\nnextPageBtn.addEventListener('click', () => {\n    toggleIsVisuallyHidden(true);\n    toggleIsLoader(nextPageLoader);\n    pixabayApiFunction(inputValue, page)\n        .then((response) => {\n            if (response.hits.length == 0) {\n                iziToast.warning({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: \"topRight\",\n                    theme: 'dark',\n                    backgroundColor: '#ef4040'\n                });\n                throw new Error('Cannot found');\n            };\n            toggleIsLoader(nextPageLoader);\n            mainList.insertAdjacentHTML(\"beforeend\", renderElements(response.hits).join(\"\"));\n            toggleIsVisuallyHidden(false);\n            lightbox.refresh();\n            if (page > totalPages) {\n                toggleIsVisuallyHidden(true);\n                return iziToast.warning({\n                    backgroundColor: '#8187f5e8',\n                    theme: 'dark',\n                    position: \"topRight\",\n                    message: \"We're sorry, but you've reached the end of search results.\"\n                });\n            };\n            let rect = mainList.querySelector('li').getBoundingClientRect();\n            window.scrollBy({\n                left: 0,\n                top: (rect.height * 2) + 15,\n                behavior: \"smooth\",\n            });\n        })\n        .catch(error => console.log(error));\n    page += 1;\n})"],"names":["pixabayApiFunction","searchWord","page","axios","renderElements","elements","strHTML","element","openSearchBtn","mainForm","mainInput","mainList","nextPageBtn","mainLoader","nextPageLoader","inputValue","totalPages","toggleIsOpen","toggleIsVisuallyHidden","set","toggleIsLoader","object","event","lightbox","SimpleLightbox","iziToast","response","item","error","rect"],"mappings":"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"}